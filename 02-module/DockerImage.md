# Run nginx Docker Image

### What is Docker Official Images?
The Docker Official Images are a curated set of Docker repositories hosted on Docker Hub.

Docker recommends you use the Docker Official Images in your projects. These images have clear documentation, promote best practices, and are regularly updated. Docker Official Images support most common use cases, making them perfect for new Docker users. Advanced users can benefit from more specialized image variants as well as review Docker Official Images as part of your Dockerfile learning process.

To see nginx image go to https://hub.docker.com/_/nginx

### docker pull: Pull images from registry to local
Optinal Step:
```
docker pull nginx:latest
```

***docker pull*** is not needed because ***docker run*** nginx automatically pulls the nginx image if it’s not already available locally. Docker checks your local image cache first; if the image is missing, it fetches it from Docker Hub. This behavior simplifies running containers with fewer commands.

Run nginx docker image:
```
docker run -it --rm -p 8080:80 --name mynginx nginx
```

```
docker run -d --rm -p 8080:80 --name mynginx nginx
```

### docker run: Starts a new container
- **-it**: Allocates an interactive terminal (not really useful with -d)
- **--rm**: Automatically removes the container when it stops
- **-d**: Runs the container in detached mode (in the background)
- **-p 8080:80**: Maps host port 8080 to container port 80 (NGINX default port)
- **--name mynginx**: Names the container mynginx
- **nginx**: The image to run (from Docker Hub if not local)

> Note: **-it** and **-d** are conflicting in most cases. **-it** is for interactive mode; **-d** is for detached. Together, they don’t usually make sense unless you plan to attach later with docker attach.

```
docker run -it --rm -p 8080:80 --name mynginx chainguard/nginx
```
**chainguard/nginx** is a minimal, secure NGINX container image built with a distroless approach—no shell, package manager, or unused libraries. It significantly reduces the attack surface and image size. Ideal for production environments focused on security, it includes only what's necessary to run NGINX, lowering vulnerability exposure.

### docker container ps: List containers
docker container ps lists all running Docker containers. It shows details like container ID, image name, command, uptime, ports, and container name. It's useful for monitoring active containers, checking port mappings, and managing container lifecycles.
```
docker ps
```
Add **-a** to view both running and stopped containers.
```
docker container ps -a
```

> Note: When you run the container with **--rm** option, it will automatically removes the container when it stops. The removed containers will not be displayed.

### docker exec: Open interactive Bash shell
```
docker exec -it mynginx bash 
```
Opens an interactive Bash shell inside the running mynginx container. The **-it** flags enable terminal input/output, allowing you to run commands inside the container. This is useful for debugging, inspecting files, or managing the container's environment from within.

> Note: While **bash** is common, **sh** is often the default shell in many minimal Docker images like NGINX.

```
cat /etc/nginx/conf.d/default.conf 
```
The command displays the contents of the default NGINX server block configuration file inside a container or system. It shows how NGINX is set to handle requests—like ports, server names, root paths, and proxy settings—helpful for understanding or debugging web server behavior.

The following script will install vim tool inside the container.
```
apt-get update
apt-get install vim
```

Update index.html file (Change "Welcome to nginx!" to "Welcome to **UPDATED** nginx!"):
```
vim /usr/share/nginx/html/index.html
```

**NOTE:** 
Docker container as a temporary, isolated environment. When you make changes directly inside a running container, those changes are stored within the container's writable layer. This layer is designed to be lightweight and specific to that container instance.

The "ephemeral" nature means that this writable layer is not persistent. When the container is stopped and removed, that writable layer, along with all the changes you made to files like index.html or installed software like Vim, is discarded. It's like writing on a whiteboard that gets erased when you close the application.

This design is intentional! It makes containers fast to start, easy to replicate, and ensures that each new container starts from a clean, consistent image.

### curl: Call nginx server
```
curl -v localhost:8080
```

### docker log: See the log
**docker logs -f <containerId or container name>**   is used to follow the logs in real-time. The **-f** stands for "follow," and it will continuously display new log entries as they are generated by the container.
```
docker logs -f mynginx
```

### docker stop: Stop container
```
docker stop mynginx
```

```
docker kill mynginx
```

When you **docker kill** a container, it's like pulling the plug on a computer – any processes running inside are terminated immediately. This can indeed lead to data inconsistency or corruption if the application inside the container was in the middle of writing data or performing a critical operation.
In contrast, docker stop sends a signal (SIGTERM) to the main process inside the container, giving it a chance to perform a graceful shutdown, save its state, and clean up before eventually terminating (after a default timeout, usually 10 seconds). If the process doesn't shut down within that timeout, Docker will then force-kill it.
So, **docker stop** is generally preferred for a clean shutdown, while docker kill is used when a container is unresponsive or needs to be terminated immediately, with the understanding of potential data loss or corruption.

```
docker stop $(docker ps -q)
```

Stops all running Docker containers on your system.

**docker ps**: Lists running containers (default shows only running ones)
**-q**: Quiet mode — outputs only container IDs

### docker pause: Pause container
**docker stop** initiates a graceful shutdown and terminates the container, which means any data stored in memory within that container is lost. On the other hand, **docker pause** temporarily suspends all processes in the container, but crucially, it preserves its memory state. This means if you pause a container, the in-memory data remains intact, and you can unpause it to resume exactly where it left off.
The command to resume a paused container is **docker unpause**.
```
docker pause mynginx
docker unpause mynginx
```

### docker remove: Remove stopped containers
Removes container with given container name or container id.
```
docker rm mynginx
```

Removes all containers on your system — both running and stopped.
```
docker rm $(docker ps -aq)
```
**-a**: Includes all containers (running, stopped, exited)

### docker filter
You can use the **--filter** flag to scope your commands. When filtering, the commands only include entries that match the pattern you specify.

The --filter flag expects a key-value pair separated by an operator.
```
docker COMMAND --filter "KEY=VALUE"
```
The key represents the field that you want to filter on. The value is the pattern that the specified field must match. The operator can be either equals (=) or not equals (!=).

For example, the following command filters the output of the docker images command to only print nginx images.
```
docker images --filter reference=nginx
```

You can combine multiple filters by passing multiple --filter flags. The following example shows how to print all images that match nginx:latest or busybox - a logical **OR**.
```
docker images --filter reference=nginx:latest --filter=reference=busybox
```

### Help:
docker --help displays a list of Docker's top-level commands and usage options. It guides users on how to interact with Docker, showing commands like run, build, ps, etc. Each command also supports --help for detailed options, making it essential for learning and troubleshooting Docker usage from the CLI.
```
docker --help
```

```
docker run --help
```

```
docker container --help
```

```
docker image --help
```